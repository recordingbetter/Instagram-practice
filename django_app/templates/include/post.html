{% load static %}
{% load custom_tags %}
{#id에 post pk 추가하여 앵커 사용#}
<article class="post" id="post-{{ post.pk }}">
    <header>
        <div class="post-header-left">
            <img src="" alt="">
            <span class="header-author">{{ post.author }}</span>
        </div>

        <div class="post-header-right">

        </div>
    </header>

    <div class="post-photo-container">
{#        # type = 'list'라는 변수에 따라 a 태그 활성/비활성#}
        {% if type == 'list' %}
            <a href="{% url 'post:post_detail' post.pk %}">
                <img src="{{ post.photo.url }}" alt="">
            </a>
        {% else %}
            <img src="{{ post.photo.url }}" alt="">
        {% endif %}
    </div>
  <div class="post-bottom">
    <div class="post-btn-container clearfix">
        <div class="btn-left">
{#            좋아요#}
            <a href="{% url 'post:post_like' post_pk=post.pk %}?next={{ request.path }}{{ request.GET|query_string }}#post-{{ post.pk }}">
            {% if user in post.like_users.all %}
{#            현재 유저가 해당 포스트를 좋아요했던 경우#}
                <svg class="heart-red" viewBox="0 0 32 29.6">
            {% else %}
{#            현재 유저가 해당 포스트를 좋아요 안했던 경우#}
                <svg class="heart-black" viewBox="0 0 32 29.6">
            {% endif %}
                <path d="M23.6,0c-3.4,0-6.3,2.7-7.6,5.6C14.7,2.7,11.8,0,8.4,0C3.8,0,0,3.8,0,8.4c0,9.4,9.5,11.9,16,21.2c6.1-9.3,16-12.1,16-21.2C32,3.8,28.2,0,23.6,0z"></path>
                </svg>
{#                <img src="{% static 'images/post-heart.png' %}" alt="">#}
            </a>

            <a href="#">
                <img src="{% static 'images/post-comment.png' %}" alt="">
            </a>
        </div>

        <div class="btn-right">
            {% if user == post.author %}
                <a href="{% url 'post:post_modify' post_pk=post.pk %}" class="btn">MODIFY</a>
                <a href="{% url 'post:post_delete' post_pk=post.pk %}" class="btn">DELETE</a>
            {% endif %}
        </div>
    </div>


    <p class="comment">좋아요 {{ post.like_count }}개</p>
        {% for user in post.like_users.all %}
            <span class="comment">{{ user }} </span>
        {% endfor %}


    <div class="post-comment-container">
{#        자기코멘트 따로 빼내기#}
        {% if post.my_comment %}
            {% include 'include/post_comment.html' with comment=post.my_comment style='red' %}
        {% endif %}

        {% for comment in post.comment_set.all %}
            {% if comment != post.my_comment %}
                {% include 'include/post_comment.html' %}
            {% endif %}
        {% endfor %}
    </div>

    <p class="created">
        <a href="{% url "post:post_detail" post.pk %}">{{ post.created_date }}</a>
    </p>
      <div class="comment-create">
{#          # 이후부분에 앵커(a 태그) 속성 추가#}
        <form action="{% url 'post:comment_create' post_pk=post.pk %}?next={{ request.path }}{{ request.GET|query_string }}#post-{{ post.pk }}" method="POST">
            {% csrf_token %}
{#            <input type="text" placeholder="댓글달기" name="comment_field">#}
{#            정확한 필드명까지 적어주면 레이블이 안생김 (comment_form 과 비교)#}
            {{ comment_form.content }}
{#            <button type="submit" class="btn">POST</button>#}
        </form>
      </div>
  </div>
</article>
